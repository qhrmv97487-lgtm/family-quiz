<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Family Team Quiz ‚Äì Buzzer Highlight</title>
<style>
body {font-family:-apple-system, BlinkMacSystemFont, Arial, sans-serif; background:linear-gradient(135deg,#eef2ff,#ffffff); margin:0;padding:20px;}
.quiz-box{max-width:600px;margin:auto;background:white;padding:25px;border-radius:16px;box-shadow:0 15px 30px rgba(0,0,0,0.1);}
h1,h2{text-align:center;}
input,select{width:100%;padding:14px;margin:10px 0;font-size:1em;}
button{width:100%;padding:16px;margin:8px 0;font-size:1em;border:none;border-radius:10px;cursor:pointer;background:#4a6cf7;color:white;}
button:hover{background:#3b55d9;}
.answer.correct{background:#28a745;}
.answer.wrong{background:#dc3545;}
.progress{text-align:center;font-size:0.9em;margin-bottom:10px;color:#555;}
img{max-width:100%;border-radius:10px;margin:15px 0;}
table{width:100%;border-collapse:collapse;margin-top:15px;}
th,td{padding:10px;border-bottom:1px solid #ddd;text-align:center;}
#buzzedTeam{font-weight:bold; color:#e67e22; margin-top:10px; text-align:center;}
</style>
</head>
<body>
<div class="quiz-box">
<h1>Family Quiz üéâ</h1>
<div id="quiz"></div>
<div id="buzzedTeam"></div>
</div>
<script>
let teamName="", teamType="kids", score=0, round=0, question=0, buzzerActive=false, buzzerAnswered=false;
const quiz=document.getElementById("quiz");
const buzzedTeamDiv=document.getElementById("buzzedTeam");

const rounds = [
{ name:"General Knowledge", questions:[{q:"How many days in a week?",a:["5","6","7","8"],c:2}]},
{ name:"Science & Nature", questions:[{q:"Closest planet to the Sun?",a:["Earth","Mars","Mercury","Venus"],c:2}]},
{ name:"History", questions:[{q:"Who first on the moon?",a:["Buzz Aldrin","Neil Armstrong","Tim Peake","Yuri Gagarin"],c:1}]},
{ name:"Geography", questions:[{q:"Biggest ocean?",a:["Atlantic","Indian","Pacific","Arctic"],c:2}]},
{ name:"Picture Round ‚Äì Flags", questions:[{q:"Which flag is this?",img:"https://flagcdn.com/w320/gb.png",a:["France","USA","UK","Australia"],c:2}]},
{ name:"Football ‚öΩ (Buzzer Round)", questions:[{q:"How many players on a football pitch?",a:["9","10","11","12"],c:2}]},
{ name:"Fun & Mixed", questions:[{q:"Superhero from Gotham?",a:["Batman","Spiderman","Hulk","Superman"],c:0}]}
];

function startScreen(){
quiz.innerHTML=`<h2>Enter Team Name</h2>
<input placeholder="Team Name" id="teamNameInput">
<select id="teamType"><option value="kids">Kids</option><option value="adults">Adults</option></select>
<button onclick="startQuiz()">Start Quiz</button>
<button onclick="showLeaderboard()">View Leaderboard</button>`;
}

function startQuiz(){
teamName=document.getElementById("teamNameInput").value||"Team";
teamType=document.getElementById("teamType").value;
score=0; round=0; question=0;
loadQuestion();
}

function loadQuestion(){
const r=rounds[round];
const q=r.questions[question];
buzzedTeamDiv.innerHTML="";
if(r.name.includes("Buzzer")){
buzzerActive=true; buzzerAnswered=false;
quiz.innerHTML=`<div class="progress">Buzzer Round ‚Äì ${r.name}<br>Question 1/1</div>
<div class="question">${q.q}</div>${q.img?`<img src="${q.img}">`:''}
${q.a.map((x,i)=>`<button class="answer" onclick="buzzerAnswer(${i},this)">${x}</button>`).join('')}
<p style="text-align:center">First correct tap wins!</p>`;
} else {
buzzerActive=false;
quiz.innerHTML=`<div class="progress">Team: ${teamName} (${teamType})<br>Round ${round+1}/${rounds.length} ‚Äì ${r.name}<br>Question 1/1</div>
<div class="question">${q.q}</div>${q.img?`<img src="${q.img}">`:''}
${q.a.map((x,i)=>`<button class="answer" onclick="answer(${i})">${x}</button>`).join('')}`;
}
}

function answer(i){
const r=rounds[round]; const q=r.questions[question]; const buttons=document.querySelectorAll(".answer");
buttons.forEach((b,idx)=>{b.disabled=true;if(idx===q.c)b.classList.add("correct"); if(idx===i && i!==q.c)b.classList.add("wrong");});
if(i===q.c) score += teamType=="adults"?2:1;
setTimeout(()=>{
round++; question=0;
if(round<rounds.length) loadQuestion(); else endQuiz();
},1200);
}

function buzzerAnswer(i,btn){
if(buzzerAnswered) return;
buzzerAnswered=true;
const r=rounds[round]; const q=r.questions[question];
if(i===q.c) score += teamType=="adults"?2:1;
buzzedTeamDiv.innerHTML=`üèÜ ${teamName} buzzed first!`;
const buttons=document.querySelectorAll(".answer");
buttons.forEach((b,idx)=>{b.disabled=true;if(idx===q.c)b.classList.add("correct"); if(idx===i && i!==q.c)b.classList.add("wrong");});
setTimeout(()=>{
round++; question=0; buzzerActive=false; loadQuestion();
},1200);
}

function endQuiz(){
let allScores=JSON.parse(localStorage.getItem("allScores")||"[]");
allScores.push({teamName,teamType,score});
localStorage.setItem("allScores",JSON.stringify(allScores));
showLeaderboard();
}

function showLeaderboard(){
let allScores=JSON.parse(localStorage.getItem("allScores")||"[]");
const rows=allScores.sort((a,b)=>b.score-a.score).map(t=>`<tr><td>${t.teamName}</td><td>${t.teamType}</td><td>${t.score}</td></tr>`).join('');
quiz.innerHTML=`<h2>üèÜ Leaderboard</h2><table><tr><th>Team</th><th>Type</th><th>Score</th></tr>${rows}</table>
<button onclick="startScreen()">New Team</button>
<button onclick="localStorage.clear();startScreen()">Reset Scores</button>`;
}

startScreen();
</script>
</body>
</html>